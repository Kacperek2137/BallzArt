pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
function _init()

rows_table = {}
rows_number = 0
freeze_center = 120

x = 0
dx = 1


end

function _update60()

	--y += 1

	if btnp(5) then
		generate_new_sushi_set(5)
	end


	if x == 30 and freeze_center > 0 then

		freeze_center -= 1
		dx = 1
		

	else

		dx += 0.1
		x += dx
		x = flr(x)
		freeze_center = 120

	end
	-- edge of screen
	if x > 128 then
		x = -100
		dx = 1
	end
 

end


function _draw()
	cls()
	--print("ã‚¢",29,y,3)
	rectfill(0,0,128,128,1)	

	draw_order(x,30, 70)

	print(freeze_center,0,0,7)
	print(x,0,9,7)
end



function draw_order(x, y, r)

rectfill(x,y,x +r, y + r, 4)
rect(x,y,x +r, y + r, 9)

for n=1, rows_number do

	--local current_ing = flr(73 + rnd(6))

	-- filling the row
	--for i=1, 2 + flr(rnd(7)) do

	for i=1, 2 + rows_table[n][2] do

		-- if a fish
		if rows_table[n][1] == 71 then

			spr(rows_table[n][1], x + 2 + i * 9 -8, y +2 + 9 * n - 8,2,2)

		else

			spr(rows_table[n][1], x + 2 + i * 9 -8, y +2 + 9 * n - 8)
		end

	end
end


print("999", x + r / 2 + 2 - 7, y + r - 13, 14)
print("points", x + r / 2 - 3 - 7, y + r - 7, 7)

end

function generate_new_sushi_set(sum_of_ings)
	rows_number = flr(sum_of_ings / 2 + rnd(sum_of_ings))
	rows_table = {}

	-- for each row
	for i=1, rows_number do 
		local roll_type = flr(71 + rnd(6))
		if roll_type == 72 then
			roll_type = 73 + flr(rnd(6))
		end
		local roll_length = 2 + flr(rnd(4))
		-- [roll type, length]
		rows_table[i] = {roll_type, roll_length}

	end

end

function roll_to_remove_tail(roll_type)

end
__gfx__
0000000000077000015113b00000000000fee700000890009222222222222ed1d1d1d1d1d1d1d1d0d1d1d1d1d1d1d1d100000000000000000011100000022200
00000000007af7001001000100faaaa90fef7e800000a0002f8f8f89898e8213131313131313131d13131313131313130000000000000000011910000002f220
0070070009ff79805010005b0aafaa9808f7ffe0005dd60028f8989898e8e21111111111111111311111111111111111d1d1d1d1d1d1d1d111e8111122229a22
000770000fa7f7f015010503f9944940028f8f800555dd602f8f89898e8e8211111111111111111d111111111111111113131313131313131e888881299999a2
000770007a6777f71010000b0f9aaaa00288e8f005555d5028989898e8e8e2111111111111111131111111111111111111111111111111111888882128999992
0070070077767779110305039af99a9802e88ee00e5555502f89888888888211111111111111111d111111111111111111111111111111111188111122229922
0000000087f77f6920305003004449800228888002d5552028989888888882111111111111111131111111111111111111111111111111110118100000029220
0000000008aff98002131330000000000022e800002552002989888888888211111111111111111d111111111111111111111111111111110011100000022200
00000000000770000333b3b000000000002ff800faf99faf2898988888888211111111111111113111111111111111111111111111111111f76a9fef00033300
000000000077770035555b5b0000000002ff7f80ff9ff9ff298e888888888211111111111111111d111111111111111111111111111111116f76f9ff0003f330
0000000007f777a0355355b309999aaf088ff880a9f99f9f28e8e88888888211111111111111113111111111111111111111111111111111676767673333ba33
00000000077777705555b55b9aaaaaa908e88e80ff9ff9fa2e8e888888888211111111111111111d11111111111111111111111111111111767676763bbbbba3
000000007f777f7a55555353aaa9999a08e88e80faf99faf28e8e88888888213131311111111113113131313131313131111111111111111676767673cbbbbb3
00000000777777f7555555539a9aaa4008e88e80ff9ff9ffe2222222222228d1d1d111111111111dd1d1d1d1d1d1d1d11111111111111111767676763333bb33
0000000057777f753555555b00000000028e8880a9f99f9f1311111111113100001311111111113100000000000000001313131313131313f76a9fef0003b330
0000000005ffff500b5553300000000000288800ff9ff9fad111111111111d0000d111111111111d0000000000000000d1d1d1d1d1d1d1d16f7ff9ff00033300
00000000f6f77f6f00000000000000009a9ff9a9f76a9fef13111111111131000013111111111131131111111111310000131111111111310000000000000000
00000000ff7ff7ff007ff94000799f0099f99f996f76f9ffd111111111111d0000d111111111111dd111111111111d0000d111111111111d0000000000000000
00000000f7f77f7f07f97f9207ff99f0ef9ff9f9f76a9fef13111111111131d1d18222222222222e131111111111310000131111111111310000000000000000
00000000ff7ff7ff797f99fe7f99f99f99f99f9e6f7ff9ffd11111111111131313288888888e8e82d111111111111d0000d111111111111d0000000000000000
00000000f6f77f6ff999fef899f99fef9a9ff9a9f76a9fef1311111111111111112888888888e8e2131111111111310000131111111111310000000000000000
00000000ff7ff7ff7f9efe20e99f9fe499f99f996f76f9ffd11111111111111111288888888e8e82d111111111111d0000d111111111111d0000000000000000
00000000f7f77f7f09fe24000eefee40ef9ff9f9f76a9fef1311111111111111112888888888e8e2131111111111310000131111111111310000000000000000
00000000ff7ff7ff000000000000000099f99f9e6f7ff9ffd1111111111111111128888888898982d111111111111d0000d111111111111d0000000000000000
00000000000000000000a00000000000000ee000f76a9fef13111111111111111128888888889892131111111111310000131111111111310000000000000000
00000000000f700000003b0a00000000008f7e00ff76f9ffd1111111111111111128888888898982d111111111111d0000d111111111111d0000000000000000
0000000000777a0000b003b000afaa9900e77e00f76a9fef131111111111111111288888888898f2131111111111310000131111111111310000000000000000
000000000777f770a00b5b300a4999a0008f7e00ff7ff9ffd111111111111111112e8e8989898982d111111111111d0000d111111111111d0000000000000000
0000000077a777a70b33b300a9994a0000eeee00f76a9fef13111111111111111128e8e89898f8f2131111111111310000131111111111310000000000000000
00000000a7af7af7005333b000000000008eee00ff76f9ffd111111111111111112e8e8989898f82d111111111111d0000d111111111111d0000000000000000
00000000077777700000a53000000000000ee000f76a9fef1d131313131313131328e89898f8f8f2131111111111310000131111111111310000000000000000
0000000000ffff0000000abd0000000000000000ff7ff9ff01d1d1d1d1d1d1d1d1e2222222222229d111111111111d0000d111111111111d0000000000000000
000011111111000000002222222200000000005555500000000000000000000800000000033330000ffff0000055500099999000000000000099900000077f70
00011999e821100000022fa99982200000000557c350000000000000000000888800000037989300f7ea7f0005777500a99a55000007700009999a0000777770
000199e8888210000002fa9999982000000055abb3500000000000000008888800000000798e770077a9a7005749775079995999007777009757990007777770
00019e21188210000002f9822a98200000055abbb350000000000000008888870000000037978300f9779f0059b93950777559a90777777095b7990079597770
0001921118821000000298222a9820000005acbbb350000000000000088887770000000033333300ffffff00573875500775777777777777975790007f99f770
000111119882100000022222f99220000005cb5cb3500000000000008877770000000000033330000ffff000055555500005777777555577099a0000775f9770
0000111e8821100000000022998200000005555bb350000000000000077770000000000000000000000000000055550000000000075555700000000000777000
00000118882110000000002f992200000000005bb350000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000118882100000000229982000000000005bb350000000000000000000000000000000000008000000000000000000000000000000000055555000000000
0000110118821000000002f9922000000000005bb350000000000000000000000000000000000088880000000000000000000000000000000577777500000000
000111111e82100000000299820000000000005bb350000000000000000000000000000000088888000000000000000000000000000000005778897750000000
000199119882100000022f99222220000000005bb350000000000000000000000000000000888887000000000000000000000000000000005778997750000000
0001e888888210000002aa9822f820000000005bb350000000000000000000000000000008888777000000000000000000000000000000005577777550000000
00011388882210000002a999999820000000005cb350000000000000000000000000000088777700000000000000000000000000000000005555555550000000
000012222221100000022c9999822000000000593350000000000000000000000000000007777000000000000000000000000000000000005555555550000000
00001111111100000000222222220000000000555550000000000000000000000000000000000000000000000000000000000000000000000555555550000000
44442424141414144444444444444444949444440000000000000000000000000000000000000000000000000000000000000000000000000055555500000000
44444242414141414444444444444444494944440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44442424141414144444444444444444949444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444242414141414444444444444444494944440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44442424141414142424242444444444949444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4444424241414141424242424444444449494444000000000000000000000000000000000000fff0000000000000000000000000000000000000000000000000
44442424141414142424242444444444949444440000000000000000000000000000000000fffff0000000000000000000000000000000000000000000000000
444442424141414142424242444444444949444400000000000000000000000000000000ffffff00000000000000000000000000000000000000000000000000
94949494f4f4f4f4848484840000000000000000000000000000000000000000000000fffffff000000000000000000000000000000000000000000000000000
494949494f4f4f4f4848484800000000000000000000000000000000000000000000affffff00000000000000000000000000000000000000000000000000000
94949494f4f4f4f484848484002222222222222220022222002222222222200000fffff222222220000000000000000000000000000000000000000000000000
494949494f4f4f4f484848480222222222222222222222220022222222222200fffff22222222222200000000000000000000000000000000000000000000000
44444444f4f4f4f4848484840222faaaa999999f222ffae2022ffa999999e22ffff2222131313132220000000000000000000000000000000000000000000000
444444444f4f4f4f48484848022ffaaa999999999e2fa982222fa9999999982fff222b1313131313222200000000000000000000000000000000000000000000
44444444f4f4f4f484848484022aaf9999999f99982a998222f9999999a9982f222b313fff7fff3131222000000000f000000000000000000000000000000000
444444444f4f4f4f48484848022aa9e2222222a9982999822fa998222299982222b31fff77ff77f71312220000000fff00000000000000000000000000000000
000000000000000000000000022aa9822222229998299982299a8222229998222b3fffe7ff77ffff7f3b220000000fff00000000000000000000000000000000
000000000000000000000000022a99820000229998299982299982ff22999822b3fffaffffff7f7e77f312200000fff000000000000000000000000000000000
0000000000000000000000000229998200002299982999822999ffff22a9982231f77ff7fabaaf7ffff132200000fff000000000000000000000000000000000
0000000000000000000000000229998200022299c329998299ffffff22fac82b177ffffaababa3ff7f7f1322000fff0000000000000000000000000000000000
0000000000000000000000000229998200222a9982299982ffffff00222222213fff7fabaabaa33f8f7f3122000fff0000000000000000000000000000000000
000000000000000000000000022999820222a999822999ffffff2000222222b3f7af79babaaab844fffff3b220fff00000000000000000000000000000000000
00000000000000000000000002299982222a99982229ffffff982000000022317ff7f99999ab4444f7f7713220fff00000000000000000000000000000000000
0000000000000000000000000229998222a9998222ffffff99982000000022137ef7999ff994444847fff3122fff000000000000000000000000000000000000
00000000000000000000000002299a9999999822ffffff8299982000000022317f7fe9f9999484444ff731322fff000000000000000000000000000000000000
00000000000000000000000002299999999982ffffff99829998200000002213ff7f8e99ff98448487f7f312fff0000000000000000000000000000000000000
0000000000000000000000000229999999c32fffff2999829998200000002231f7fefe9f99944844f7fff132fff0000000000000000000000000000000000000
000000000000000000000000022999e2222fffff02299982f998200000002213f7fff8e999ff4444fff7f3b2ff00000000000000000000000000000000000000
000000000000000000000000022999822fffff000229998229998200022222213ff7ff8e9f99484f7aff312fff00000000000000000000000000000000000000
000000000000000000000000022999822fff000002299982299982002222222b1f8ffffeeee844ffff8f132ff000000000000000000000000000000000000000
000000000000000000000000022999822f000000022999822999820022fa982231fa7f8ff888ff77fff132fff000000000000000000000000000000000000000
000000000000000000000000f229998220000000022999822f99822222a9982213fffff77fffffef7f7312ff0000000000000000000000000000000000000000
0000000000000000000000fff22999822000000002299982229998222a99c3222b3fff7fff7f77ff713b2fff0000000000000000000000000000000000000000
00000000000000000000fffff2299982200000000229998222a999999999822222131ffffe7fff7f13122ff00000000000000000000000000000000000000000
000000000000000000fffffff22a99b220000000022a99822222999999982220222b3137fff7ff3131222ff00000000000000000000000000000000000000000
0000000000000000ffffffff022fac3220000000022fac320222a99999c32200022223131313131b2222ff000000000000000000000000000000000000000000
00000000000000ffffffff0002222222200000000222222200222222222220000002222b31313122220fff000000000000000000000000000000000000000000
000000000000ffffffff00000222222220000000022222220002222222222002222222222222222222222f000000000000000000000000000000000000000000
0000000000ffffffff00000002222222200000000002222200002222222222222222202222222222222220000000000000000000000000000000000000000000
000000000fffffff00000000022ffae220000000022ffae200022ffa99999b22ffae200022ffae2ffae220000000000000000000000000000000000000000000
000000000fffff0000000000022fa98222000002222fa98200022fa999999982fa98200022fa982fa98220000000000000000000000000000000000000000000
0000000000fff00000000000022a99982220002222fa998200222a9999a99982a998200022a9982a998220000000000000000000000000000000000000000000
00000000000000000000000002299999a8200022fa9999820022fa9e22fa99829998200022999829998220000000000000000000000000000000000000000000
0000000000000000000000000229999998200022a99999820022999822299982a998200022999829998220000000000000000000000000000000000000000000
0000000000000000000000000229999998200022999999820222a998222999829998200222a99829998220000000000000000000000000000000000000000000
000000000000000000000000022999999820002299999982022f999822299982999820222f998229998220000000000000000000000000000000000000000000
000000000000000000000000022999999820002299999982022a99982229998299982222a9998229998220000000000000000000000000000000000000000000
000000000000000000000000022999a99982022999a99982022a9982222999829998222f99982229998220000000000000000000000000000000000000000000
00000000000000000000000002299f89998202299a8999820229998222299982999822f99982222999822000000000001dd1111111111dd13166363661616631
0000000000000000000000000229998a9998229999899982222a99822229998299a99999982202299982200000000000d11111111111111d1666161663636663
0000000000000000000000000229998fa99822999989998222f99a999999998299999999822002299982200000000000d111111dd111111d3c663636616166c1
000000000000000000000000022999822a9989999829998222a999999999998299999999820002299982200000000000111111dddd11111113cc1c1cc3c3cc13
000000000000000000000000022999822a999999c3299982229999999999998299982999820002299982200000000000111dd1dddd1dd1113131313131313131
000000000000000000000000022999822fa999998229998222a998222229998299982f9998200229998220000000000011dddddddddddd111316131663136313
0000000000000000000000000229998222a99998222999822f99982222299982999822999820ff29998220000000000011ddddd11ddddd1131c1313cc1313c31
00000000000000000000000002299982222a9982222999822a99822002299982999822a9998fff299982200000000000111ddd1111ddd1116313166316631316
00000000000000000000000002299982022fa982022999822a9982000229998299982229998fff29998220000000000011111dd11dd11111c13136c13c613136
00000000000000000000000002299982022222220229998229998200022999829998222f99fff22999822000000000001111dddddddd11111313131663131313
0000000000000000000000000229998200222220022999822a998200022999829998202299fff2299982200000000000111dddddddddd1116166313cc1316636
000000000000000000000000022999820000000002299982f99982000229998299982022afff22299982200000000000111ddddd1dddd1116366631313166616
000000000000000000000000022999820000000002299982a998220002299982999820022fff922999822000000000001111ddd111dd11116166c136613c6636
000000000000000000000000022a998200000000022a9982a9982000022a9982a9982002fff9982a9982200000000000d11111111111111dc36c131cc313c61c
000000000000000000000000022fac3200000000022fac3299c32000022fac32fac32000fffac32fac32200000000000d11111111111111d3131313131313131
00000000000000000000000002222222000000000222222222222000022222222222200ffff2222222222000000000001dd1111111111dd11313131663131313
00000000000000000000000002222222000000000222222222222000022222222222200fff2222222222200000000000111111111111111111dd1d1dd1d1dd11
0000000000000000000000000000000000000000000000000000000000000000000000ffff000000000000000000000011111111111111111ddd1d1dd1d1ddd1
0000000000000000000000000000000000000000000000000000000000000000000000fff0000000000000000000000011111111111111111ddd1d1dd1d1ddd1
000000000000000000000000000000000000000000000000000000000000000000000ffff00000000000000000000000111111111111111111dd1d1dd1d1dd11
000000000000000000000000000000000000000000000000000000000000000000000fff00000000000000000000000011111111111111111111111111111111
00000000000000000000000000000000000000000000000000000000000000000000ffff00000000000000000000000011111111111111111113111dd1113111
00000000000000000000000000000000000000000000000000000000000000000000fff000000000000000000000000011111111111111111131111dd1111311
0000000000000000000000000000000000000000000000000000000000000000000ffff00000000000000000000000001111111111111111d1111dd11dd1111d
000000000000000000000000000000000000000000000000000000000000000000ffff000000000000000000000000001111111111111111d1111dd11dd1111d
000000000000000000000000000000000000000000000000000000000000000000ffff0000000000000000000000000011111111111111111111111dd1111111
00000000000000000000000000000000000000000000000000000000000000000ffff0000000000000000000000000001111111111111111d1dd111dd111dd1d
0000000000000000000000000000000000000000000000000000000000000000fffff0000000000000000000000000001111111111111111d1ddd111111ddd1d
0000000000000000000000000000000000000000000000000000000000000000ffff00000000000000000000000000001111111111111111d1ddd113311ddd1d
0000000000000000000000000000000000000000000000000000000000000000ffff00000000000000000000000000001111111111111111d1dd11133111dd1d
00000000000000000000000000000000000000000000000000000000000000000ff0000000000000000000000000000011111111111111111111111111111111
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111dd1111111
__map__
4646464646464646464646464646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464671707070707070724646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464664636363636363604646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464664636363636363604646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464664636363636363604646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464664636363636363604646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464672626262626262614646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464665656565656565654646464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
